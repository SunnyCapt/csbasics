## Lab6

### [finished work](../static/lab6.pdf)

## Answers

1. Особенности организации программ обмена данными с использованием 
   прерываний. Сохранение и восстановление значений регистров. 
   * Обмен по прерываниям хорош тем, что экономит времени ожидания за счёт    
     использования аппаратных средств(автоматически проверяется запрос прервания, не нужно это делать в цикле командой TSF). Для реализации такого обмена требуется описать программу обработки прерывания, в которой и будет происходить ввод/вывод. Так как обработка ввода/вывода происходит
     программно, то значит во время её работы исходные значения затрутся, поэтому в самом начале этой подпрограммы мы должны сохранять значения аккумулятор и переноса. По завершении обработки следует восстановить ээти значения.

2. Команды работы разрешения/запрещения прерываний БЭВМ. Название, назначение 
   и тип команды. Количество и название машинных циклов, потактовое выполнение команды. 
   * EI - разрешение прерываний
     Назначение: разрешить прерывания
     Тип: безадресная
        - выборка команды
            + СК => БР
            + БР => РА
            + ОП(РА) => РД; СК + 1 => БР
            + БР => СК
            + РД => БР
            + БР => РК
            + 4 проверки на код операции, после GOTO на обработку БАД
        - исполнение
            + две проверки и goto на 6С, еще две проверки и переход к 
              выполнению EI
            + в РС устанавливается бит разрешения прерывания (В28)
   * DI - запрещение прерываний
     Назначение: запретить прерывания
     Тип: безадресная
        - выборка команды
            + СК => БР
            + БР => РА
            + ОП(РА) => РД; СК + 1 => БР
            + БР => СК
            + РД => БР
            + БР => РК
            + 4 проверки на код операции, после GOTO на обработку БАД
        - исполнение
            + две проверки и goto на 6С, еще две проверки и переход к 
              выполнению DI
            + в РС сбрасывается бит разрешения прерывания (В27)

3. Вектора прерываний. Преимущество использования векторов прерываний. 
   * 

4. Потактовое выполнение цикла прерывания после команды BR (0). 
    + две проверки РС: на работу/останов и разрешение прерываний
    + 0 => БР
    + БР => РА
    + СК => БР
    + БР => РД
    + РД => ОП(РА); 1 => БР
    + БР => СК
    + запрещение прерывания

5. Когда выполняется цикл обработки прерывания? После каких команд он не 
   выполняется? Почему? 
   * После цикла исполнения. Не выполняется после DI, HLT и EI
       -  EI - чтобы при выходе из обработки препрывания новое прерывание не 
          затерло адрес возврата первого

6. Обрабатываются ли прерывания в пошаговом режиме (режиме останов) работы 
   программы? Почему? 
   * останов, значит 7 бит РС 0, значит первая проверка цикла прерываний будет ложно и эвм перейдет с следующей  команде

7. Что происходит при одновременном поступлении сигнала готовности нескольких 
   внешних устройств? В какой последовательности они будут обработаны? 
   * обработка будет происходить в соответствии с написанной программой 
     обработки прерываний: по очередности проверок флага готовности каждого ВУ

8. Почему не будет обработано прерывание сразу после выполнения команды EI? 
   Для чего сделано так, что после цикла исполнения команды EI цикл прерывания не вызываются и прерывания не обрабатываются? 
   * Потому что после внесения единичного бита в соответствующий разряд РС эвм 
     перейдёт к следующей команде. Так сделанно чтобы  не допуститьь затирания адреса возврата.

9. За что отвечают биты 4, 5, 6 и 7 регистра состояния? Когда изменяется их 
   значение? 
   + 7 - режим тумблера РАБОТА/ОСТАНОВ - при намеренном измененнии
   + 6 - состояние ВУ (ф) - при выполнении TSF
   + 5 - Прерывание (логическое “И” шины запроса на прерывание и бита 4 РС) 
   + 4 - разрешение прерывания - при EI/DI и после нажатия кнопки ПУСК
